<!-- Path: GeneralWebApi/Frontend/general-frontend/src/app/features/auth/reset-password/reset-password.component.html -->
<div class="reset-password-container">
  <div class="reset-password-content">
    <div class="form-container">
      @if (verifyingToken()) {
        <div class="verifying-message">
          <div class="loading-spinner">
            <span class="material-icons spin">sync</span>
          </div>
          <p>{{ 'auth.resetPassword.verifyingToken' | translate }}</p>
        </div>
      } @else if (!tokenValid()) {
        <div class="error-message">
          <div class="error-icon">
            <span class="material-icons">error</span>
          </div>
          <h3>{{ 'auth.resetPassword.invalidToken' | translate }}</h3>
          <p>{{ 'auth.resetPassword.tokenExpiredOrInvalid' | translate }}</p>
          <app-base-button
            [text]="'auth.resetPassword.backToLogin' | translate"
            variant="primary"
            (buttonClick)="goToLogin()"
            icon="arrow_back"
            customClass="full-width"
          ></app-base-button>
        </div>
      } @else {
        <div class="form-header">
          <h2>{{ 'auth.resetPassword.title' | translate }}</h2>
          <p>{{ 'auth.resetPassword.description' | translate }}</p>
        </div>

        <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="reset-password-form">
          <!-- New Password Input -->
          <div class="form-group">
            <app-base-input
              formControlName="newPassword"
              type="password"
              [placeholder]="'auth.resetPassword.newPassword' | translate"
              [required]="true"
              [error]="getFieldError('newPassword')"
              prefixIcon="lock"
              autocomplete="new-password"
              inputId="reset-password-new"
            ></app-base-input>
          </div>

          <!-- Confirm Password Input -->
          <div class="form-group">
            <app-base-input
              formControlName="confirmPassword"
              type="password"
              [placeholder]="'auth.resetPassword.confirmPassword' | translate"
              [required]="true"
              [error]="getFieldError('confirmPassword')"
              prefixIcon="lock"
              autocomplete="new-password"
              inputId="reset-password-confirm"
            ></app-base-input>
          </div>

          <!-- Submit Button -->
          <app-base-button
            type="submit"
            [text]="'auth.resetPassword.resetPassword' | translate"
            variant="primary"
            [loading]="loading()"
            [disabled]="resetPasswordForm.invalid || loading()"
            icon="lock_reset"
            customClass="full-width"
          ></app-base-button>

          <!-- Back to Login -->
          <div class="form-footer">
            <a
              href="#"
              class="back-link"
              (click)="goToLogin(); $event.preventDefault()"
            >
              <span class="material-icons">arrow_back</span>
              {{ 'auth.resetPassword.backToLogin' | translate }}
            </a>
          </div>
        </form>
      }
    </div>
  </div>
</div>

