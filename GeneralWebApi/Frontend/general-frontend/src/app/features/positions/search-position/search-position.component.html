<!-- Path: GeneralWebApi/Frontend/general-frontend/src/app/features/positions/search-position/search-position.component.html -->
<div class="search-position-container">
  <div class="page-header">
    <h2>
      <span class="material-icons">search</span>
      {{ 'positions.search.title' | translate }}
    </h2>
    <p>{{ 'positions.search.subtitle' | translate }}</p>
  </div>

  <!-- Search Form Section -->
  <div class="search-section">
    <app-base-card
      [title]="'positions.search.cardTitle' | translate"
      [icon]="'search'"
      [variant]="'elevated'"
    >
      <div class="search-stats" *ngIf="allPositions().length > 0">
        <span class="stat-text">
          {{ 'positions.search.showing' | translate: {count: allPositions().length} }}
        </span>
      </div>

      <div class="search-form-container">
        <app-base-form
          [config]="searchFormConfig"
          [formData]="searchFilters()"
          [loading]="loading()"
          [fieldLoading]="fieldLoading()"
          (formSubmit)="onSearchFormSubmit($event)"
          (formCancel)="onSearchFormCancel()"
          (fieldDropdownOpen)="onFieldDropdownOpen($event.key)"
        ></app-base-form>
      </div>
    </app-base-card>
  </div>

  <!-- Positions List -->
  <div class="positions-section">
    <app-base-async-state
      [loading$]="loading$"
      [data$]="positionsData$"
      [loadingMessage]="'positions.search.loadingMessage' | translate"
      [emptyTitle]="'positions.search.emptyTitle' | translate"
      [emptyDescription]="'positions.search.emptyDescription' | translate"
      [onRetry]="onRetryLoad"
    >
      <!-- Success content: Position table -->
      <app-base-table
        [data]="allPositions()"
        [columns]="tableColumns"
        [actions]="tableActions"
        [config]="{
          showHeader: true,
          showFooter: true,
          showPagination: true,
          showSearch: false,
          showActions: true,
          striped: true,
          hoverable: true,
          bordered: false,
          size: 'medium',
          loading: false,
          emptyMessage: ''
        }"
        [pageSize]="10"
        (rowClick)="onRowClick($event)"
      ></app-base-table>
    </app-base-async-state>
  </div>
</div>

<!-- Position Detail Modal -->
<app-position-detail
  [position]="selectedPositionForDetail"
  [isOpen]="isDetailModalOpen"
  [mode]="detailMode"
  (closeEvent)="onCloseDetailModal()"
  (positionUpdated)="onPositionUpdated($event)"
></app-position-detail>

